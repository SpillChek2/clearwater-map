#mapstory #map { position:absolute; top:0; bottom:0; width:100%; }

#mapstory svg {
  width: 100%;
  height: 100%;
}

#mapstory {
  margin:0px;
  padding:0px;
  font: 400 15px/22.5px "PT Sans",Arial,sans-serif;
  background: black;
}

#mapstory #nav {
position: absolute;
left: 0px;
top: 71px;
background-color: #222;
opacity: 0;
z-index: 3;
transition:opacity 500ms;
-moz-transition:opacity 500ms;
-webkit-transition:opacity 500ms;
}
#mapstory.zoom11 #nav {
opacity: 1;
}

#mapstory #nav a {
	font-family: "Yanone Kaffeesatz";
	font-size: 1.5em;
	display: block;
	color: #FFFFFF;
	text-decoration: none;
	padding-left: 45px;
	background-repeat: no-repeat;
	background-image: url(http://digidem.github.io/clearwater-map/images/arrow_white1.png);
	padding-top: 7px;
	padding-right: 10px;
	padding-bottom: 7px;
	background-position: 5px;
	margin: 4px;
}

#mapstory #nav a:hover {
	color: #DADADA;
	background-image: url(http://digidem.github.io/clearwater-map/images/arrow_grey1.png);
}

#mapstory .instruction {
margin: 0 0 -122px;
position: relative;
top: -500px;
left: 750px;
height: 250px;
width: 228px;
background: url(http://digidem.github.io/clearwater-map/images/initialclick.png) no-repeat scroll left bottom;
text-indent: -2000px;
z-index: 2;
display: none;
}

#mapstory #stories {
  width: 30em;
  position: absolute;
  top: 100%;
  margin: 0 0 0 40px;
  color: #eee;
  transition: opacity 0.4s linear;
  -moz-transition: opacity 0.4s linear;
  -webkit-transition: opacity 0.4s linear;
}

#mapstory #stories article:first-child section:first-child {
  position: absolute;
  bottom: 100%;
}

#mapstory #stories article {
/*  margin-bottom: 1000px;*/
}

#mapstory .background {
  background-color: #222;
  position: relative;
  bottom: 0;
  transform: translate3d(0,0,0);
  -moz-transform: translate3d(0,0,0);
  -webkit-transform: translate3d(0,0,0);
}

#mapstory .affixed {
position: fixed !important;
}

#mapstory .collapsed {
position: absolute !important;
}

#mapstory .offscreen {
display: none;
}

#mapstory .faded {
opacity: 0;
}

#mapstory #stories section {
  margin-top: 20em;
  position: relative;
  width: 100%;
  transition:opacity 1s;
  -moz-transition:opacity 1s;
  -webkit-transition:opacity 1s;
}

#mapstory #stories h1, #mapstory #stories h2 {
  position: absolute;
  top: 0;
  line-height: 1em;
  padding: 0.25em 1em;
  margin: 0;
  font-weight: normal;
  font-family: "Yanone Kaffeesatz", sans-serif;
}

#mapstory #stories h1 {
  padding: 0.2em 0.88889em;
  margin-left: -0.88889em;
  width: 11.55556em;
  font-size: 2.25em;
  font-weight: 700;
  z-index: 3;
  color: black;
  background-color: #f2c21c;
}

#mapstory #stories h1.fixedTop {
  position: fixed;
}

#mapstory #stories h1.fixedBottom, 
#mapstory #stories h2.fixedBottom {
  position: fixed;
  top: auto;
  bottom: 0;
}


#mapstory #stories h2 {
  margin-left: -1em;
  width: 13em;
  font-size: 2em;
  color: #f2c21c;
  background-color: black;
}

#mapstory #stories .text {
  background-color: #333;
  padding: 3em 2em 0.5em;
  position: relative;
}

#mapstory #stories .text.below {
  position: absolute;
}

#mapstory .button {
	font-family: Arial;
	color: #ffffff;
	font-size: 15px;
	padding: 5px;
	text-decoration: none;
	-webkit-border-radius: 0px;
	-moz-border-radius: 0px;
	border-radius: 0px;
	text-shadow: 1px 1px 3px #666666;
	border: solid #8d85ff 0px;
	background: -webkit-gradient(linear, 0 0, 0 100%, from(#7656b3), to(#7656b3));
	background: -moz-linear-gradient(top, #7656b3, #7656b3);
	margin-top: 10px;
	margin-right: 20px;
	margin-bottom: 10px;
	margin-left: 10px;
}
#mapstory .button:hover {
  background: #6d52a8;
}

#mapstory #stories ul, #mapstory #stories p {

}

#mapstory #stories ul {
  font-size: 1.1em;
list-style-type: none;
}

#mapstory #stories ul li {
margin-bottom: 0.5em;
}

#mapstory #stories .image {
  position: relative;
  height: 0;
  padding-bottom: 66%;
  overflow: hidden;
}

#mapstory #stories img {
  position: absolute;
  top: 50%;
  display: block;
  width: 100%;
  -webkit-transform: translateY(-50%);
  -moz-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  -o-transform: translateY(-50%);
  transform: translateY(-50%);
}

a 
{
	color: #f2c21c;
	text-decoration: none;	
}

#mapstory a.scroll {
	color: #fff;
	position: absolute;
	right: 0px;
	bottom: -40px;
	font-size: 0.7em;
	text-transform: uppercase;
	padding: 5px 10px;
	height: 56px;
}
#mapstory a.scroll:after {
content: " â–¼";
}
#mapstory .colophon {
  display:block;
  margin-top:10px;
  }

#mapstory #mappane {
  position:fixed;
  top:0;
  bottom:0;
  right:0;
  left:0;
  }
#mapstory #map  {
  position:absolute;
  top:0px;
  bottom:0px;
  width:100%;
  height:100%;
  }
#mapstory #label {
  position: absolute;
  padding: 5px 10px;
  color: black;
  background: #f1c21c;
  font-family: "Yanone Kaffeesatz";
  font-size: 1.5em;
  z-index: 999;
  display: none;
  box-shadow: 0 10px 0 rgba(0,0,0,0.5);
}
#mapstory #legend {
opacity: 0;
position: absolute;
bottom: 0;
right: 0;
width: 340px;
background: #222;
transition:opacity 500ms;
-moz-transition:opacity 500ms;
-webkit-transition:opacity 500ms;
}

#mapstory.zoom12 #legend {
opacity: 0.7;
filter: alpha(opacity = 70); /* For IE */
}

#mapstory #legend dl {
	margin: 10px;
	padding: 10px;
	font-family: "Yanone Kaffeesatz"; /* main font/type */
	font-size: 1.5em;
	display: block;
	color: #FFFFFF;
	text-decoration: none;
}

#mapstory #legend dt {
  display: block;
  margin: 0; padding: 0 0 0 1.65em;
  line-height: 1.2em;
  background-repeat: no-repeat;
  background-size: 0.95em 0.95em;
  background-position: 5px;
}
#mapstory #legend dt.system {
  background-image: url(http://digidem.github.io/clearwater-map/images/cw-system.png);
}
#mapstory #legend dt.story {
  background-image: url(http://digidem.github.io/clearwater-map/images/cw-story.png);
}

@media (max-width:640px) {
  #mapstory #map {
    display: none;
  }
  #mapstory #nav {
    display: none;
  }
  #mapstory #stories {
    margin: 0;
    width: 100%;
  }
  #mapstory #stories article, #mapstory #stories section {
    margin-bottom: 0;
    margin-top: 0;
  }
  
  #mapstory #stories section h3 {
    display: none;
  }
  #mapstory #stories .background {
    width: 100% !important;
  }
  #mapstory .affixed, #mapstory .collapsed {
    position: relative !important;
  }
  #mapstory .offscreen {
    display: inherit;
  }
  #mapstory .faded {
    opacity: inherit;
  }
}

@media (max-width:768px) {
  #mapstory {
    font-size:12px;
    line-height:18px;
    }
  #mapstory #nav {
    display: none;
  }
  #mapstory #stories article {
    width:100%;
    min-width:100%;
    padding-top:0px;
    /*padding-bottom:200%;*/
    }  
  #mapstory #stories article, #mapstory #stories section {
    margin-bottom: 0;
    margin-top: 0;
  }
  #mapstory #stories section {
    text-shadow:none;
    margin-left:0px;
    /*padding:30px;*/
    }
  #mapstory #mappane { width:100%; }
  #mapstory #map  {
    bottom:0%;
    left:0%;
    width:100%;
    height:150%;
    }
  #mapstory #legend {
    display: none;
  }
}

@media (min-width:1280px) {

#mapstory {
  font-size:18px;
  line-height:27px;
  }
}
  
  
/* Map elements */

#mapstory path {
  fill: #f1c21c;
  fill-opacity: .6;
  stroke: #f1c21c;
  stroke-width: 0;
  stroke-linejoin: round;
  cursor: pointer;
  transition:fill-opacity 500ms,opacity 500ms;
  -moz-transition:fill-opacity 500ms,opacity 500ms;
  -webkit-transition:fill-opacity 500ms,opacity 500ms;
}

#mapstory path:hover {
  fill: #ab8b1e;
}

#mapstory #communities { display: none;}

#mapstory.zoom7 #communities { display: block;}

#mapstory #communities path { opacity: 0;}

#mapstory.zoom8 #communities path {opacity:1;}

#mapstory.zoom12 #communities path {
fill-opacity: 0;
stroke-width: 2px;
cursor: default;
}

#mapstory #communities #label {
  opacity: 0;
  transition: opacity 0.5s;
  -moz-transition: opacity 0.5s;
  -webkit-transition: opacity 0.5s;
}
#mapstory.zoom8 #communities #label {
  opacity: 1;
}
#mapstory.zoom10 #communities #label {
  opacity: 0 !important;
}

#mapstory.zoom12 #communities path:hover {
fill-opacity: 0;
}

#mapstory.zoom14 #communities g {display: none;}

#mapstory #project-area path {
/*filter: url(#blur);*/
transition:fill-opacity 250ms, opacity 250ms;
-moz-transition:fill-opacity 250ms, opacity 250ms;
-webkit-transition:fill-opacity 250ms, opacity 250ms;
}

#mapstory #project-area path.ecuador-border {
stroke-width: 2px;
fill-opacity: 0;
}

#mapstory #project-area path.project-area {
fill-opacity: 0.9;
}

#mapstory #project-area path:hover {
  fill-opacity: 0.5;
/*  filter: url(#blur-hover);*/
}

#mapstory .filtered path.project-area {
filter: url(#blur);
}

#mapstory .filtered path.project-area:hover {
filter: url(#blur-hover);
}

#mapstory.zoom6 #project-area path.ecuador-border {
opacity: 0;
}

#mapstory.zoom8 #project-area path {
opacity: 0;
}

#mapstory.zoom9 #project-area { display: none; }

#mapstory .markers {
display: none;
opacity: 0;
transition:opacity 500ms;
-moz-transition:opacity 500ms;
-webkit-transition:opacity 500ms;
}

#mapstory .markers.zoom11 {
display: block;
}

#mapstory .markers.zoom12 {
opacity: 1;
}

#mapstory .marker {
margin-left: -8px;
margin-top: -8px;
width: 16px;
height: 16px;
display: block;
position: absolute;
cursor: pointer;
pointer-events: all;
-webkit-transition-timing-function: cubic-bezier(0.680, 0, 0.265, 1); /* older webkit */
-webkit-transition-timing-function: cubic-bezier(0.680, -0.550, 0.265, 1.550); 
   -moz-transition-timing-function: cubic-bezier(0.680, -0.550, 0.265, 1.550); 
    -ms-transition-timing-function: cubic-bezier(0.680, -0.550, 0.265, 1.550); 
     -o-transition-timing-function: cubic-bezier(0.680, -0.550, 0.265, 1.550); 
        transition-timing-function: cubic-bezier(0.680, -0.550, 0.265, 1.550); /* easeInOutBack */
-webkit-transition-property: width,height,margin;
  	-moz-transition-property: width,height,margin;
	    -o-transition-property: width,height,margin;
	   -ms-transition-property: width,height,margin;
	       transition-property: width,height,margin;
-webkit-transition-duration: 0.1s;
	 -moz-transition-duration: 0.1s;
	   -o-transition-duration: 0.1s;
	  -ms-transition-duration: 0.1s;
	      transition-duration: 0.1s;
        z-index: -1;
}

#mapstory .marker.featured {
margin-left: -12px;
margin-top: -12px;
width: 24px;
height: 24px;
z-index: 0;
}

#mapstory .marker:hover {
margin-left: -17px;
margin-top: -17px;
width: 33px;
height: 33px;
z-index:1;
pointer-events: all;

}

#mapstory .marker-popup {
  position:absolute;
  left:0;
  bottom:0;
  width:150px;
  background:#fff;
  color:#000;
  padding:0;
  margin:0;
  z-index: 9999;
  overflow: hidden;
  pointer-events: none;
  -webkit-box-shadow: 0px 0px 5px 0px #ccc;
          box-shadow: 0px 0px 5px 0px #ccc;
}

#mapstory .marker-popup .wrapper {
  position: relative;
  height: 0;
  padding-bottom: 66.67%;
  overflow: hidden;
}

#mapstory .marker-popup img {
  position: absolute;
  top: 50%;
  display: block;
  width: 100%;
  -webkit-transform: translateY(-50%);
  -moz-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  -o-transform: translateY(-50%);
  transform: translateY(-50%);
}

#mapstory .marker-popup p {
margin: 3px 10px;
}
